{"ast":null,"code":"var _jsxFileName = \"/usr/app/src/Context/User.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { getMovies } from '../Api/MovieAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext({\n  favorites: []\n});\nexport const useUser = () => {\n  _s();\n  return useContext(UserContext);\n};\n_s(useUser, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst UserProvider = props => {\n  _s2();\n  const [user, setUser] = useState({\n    favorites: [],\n    ratings: []\n  });\n  const [movies, setMovies] = useState([]);\n  const [title, setTitle] = useState('');\n  const [genres, setGenres] = useState([]);\n  const [yearRange, setYearRange] = useState([1999, 2023]);\n  const fetchMovies = () => {\n    getMovies().then(res => {\n      setMovies(res);\n    });\n  };\n  const getMovie = id => {\n    const movie = movies.find(movie => movie.id == parseInt(id));\n    // stupid fix\n    return movie == null ? 'loading' : movie;\n  };\n  const addFavorite = id => {\n    if (!user.favorites.some(fav => fav.id === id)) {\n      const movie = movies.find(movie => movie.id === id);\n      setUser({\n        ...user,\n        favorites: [...user.favorites, {\n          id: id,\n          title: movie.title,\n          tagline: movie.tagline\n        }]\n      });\n    }\n  };\n  const removeFavorite = id => {\n    setUser({\n      ...user,\n      favorites: user.favorites.filter(favorite => favorite.id !== id)\n    });\n  };\n  const addRating = (id, rate) => {\n    if (user.ratings.some(rat => rat.id === parseInt(id))) {\n      setUser({\n        ...user,\n        ratings: user.ratings.map(rat => rat.id === parseInt(id) ? {\n          id: parseInt(id),\n          rate: rate\n        } : rat)\n      });\n    } else {\n      setUser({\n        ...user,\n        ratings: [...user.ratings, {\n          id: parseInt(id),\n          rate: rate\n        }]\n      });\n    }\n  };\n  const getRating = id => {\n    if (user.ratings.length > 0) {\n      var _user$ratings$find;\n      return (_user$ratings$find = user.ratings.find(rat => rat.id === parseInt(id))) === null || _user$ratings$find === void 0 ? void 0 : _user$ratings$find.rate;\n    } else {\n      return 0;\n    }\n  };\n  const toggleFavorite = id => {\n    if (user.favorites.some(fav => fav.id === id)) {\n      setUser({\n        ...user,\n        favorites: user.favorites.filter(fav => fav.id !== id)\n      });\n    } else {\n      const movie = movies.find(movie => movie.id === id);\n      setUser({\n        ...user,\n        favorites: [...user.favorites, {\n          id: id,\n          title: movie.title,\n          tagline: movie.tagline\n        }]\n      });\n    }\n  };\n  const toggleGenre = genre => {\n    if (genres.some(gen => gen === genre)) {\n      setGenres(genres.filter(gen => gen !== genre));\n    } else {\n      if (Array.isArray(genre)) {\n        setGenres([...genres, ...genre]);\n      } else {\n        setGenres([...genres, genre]);\n      }\n    }\n  };\n  const value = {\n    user,\n    movies,\n    title,\n    genres,\n    yearRange,\n    ratingRange,\n    setTitle,\n    addRating,\n    getRating,\n    addFavorite,\n    removeFavorite,\n    toggleFavorite,\n    fetchMovies,\n    getMovie,\n    toggleGenre\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: value,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_s2(UserProvider, \"EwshjaHK+AYs5tt6vn8forgSnYU=\");\n_c = UserProvider;\nexport default UserProvider;\nvar _c;\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["createContext","useContext","useState","useEffect","getMovies","UserContext","favorites","useUser","UserProvider","props","user","setUser","ratings","movies","setMovies","title","setTitle","genres","setGenres","yearRange","setYearRange","fetchMovies","then","res","getMovie","id","movie","find","parseInt","addFavorite","some","fav","tagline","removeFavorite","filter","favorite","addRating","rate","rat","map","getRating","length","toggleFavorite","toggleGenre","genre","gen","Array","isArray","value","ratingRange","children"],"sources":["/usr/app/src/Context/User.js"],"sourcesContent":["\nimport { createContext, useContext, useState, useEffect } from 'react'\nimport { getMovies } from '../Api/MovieAPI'\n\nconst UserContext = createContext({\n    favorites: [],\n})\n\nexport const useUser = () => (\n    useContext(UserContext)\n)\n\nconst UserProvider = (props) => {\n\n    const [user, setUser] = useState({\n        favorites: [],\n        ratings: [],\n    })\n\n    const [movies, setMovies] = useState([])\n    const [title, setTitle] = useState('')\n    const [genres, setGenres] = useState([])\n    const [yearRange, setYearRange] = useState([1999,2023])\n\n    const fetchMovies = () => {\n        getMovies().then(res => {\n            setMovies(res)\n        })\n    }\n\n    const getMovie = (id) => {\n        const movie = movies.find(movie => movie.id == parseInt(id))\n        // stupid fix\n        return movie == null ? 'loading' : movie\n    }\n\n    const addFavorite = (id) => {\n        if (!user.favorites.some(fav => fav.id === id)) {\n            const movie = movies.find(movie => movie.id === id)\n            setUser({...user, favorites: [...user.favorites, { id: id, title: movie.title, tagline: movie.tagline }]})\n        }\n    }\n\n    const removeFavorite = (id) => {\n        setUser({...user, favorites: user.favorites.filter(favorite => favorite.id !== id)})\n    }\n\n    const addRating = (id, rate) => {\n        if (user.ratings.some(rat => rat.id === parseInt(id))) {\n            setUser({...user, ratings: user.ratings.map((rat => rat.id === parseInt(id) ? { id: parseInt(id), rate: rate } : rat))})\n        } else {\n            setUser({...user, ratings: [...user.ratings, { id: parseInt(id), rate: rate }]})\n        }\n    }\n\n    const getRating = (id) => {\n        if (user.ratings.length > 0) {\n            return user.ratings.find(rat => rat.id === parseInt(id))?.rate\n        } else {\n            return 0\n        }\n    }\n\n    const toggleFavorite = (id) => {\n        if (user.favorites.some(fav => fav.id === id)) {\n            setUser({...user, favorites: user.favorites.filter(fav => fav.id !== id)})\n        } else {\n            const movie = movies.find(movie => movie.id === id)\n            setUser({...user, favorites: [...user.favorites, { id: id, title: movie.title, tagline: movie.tagline }]})\n        }\n    }\n\n    const toggleGenre = (genre) => {\n        if (genres.some(gen => gen === genre)) {\n            setGenres(genres.filter(gen => gen !== genre))\n        } else {\n            if (Array.isArray(genre)) {\n                setGenres([...genres, ...genre])\n            } else {\n                setGenres([...genres, genre])\n            }\n        }\n    }\n\n    const value = {\n        user,\n        movies,\n        title,\n        genres,\n        yearRange,\n        ratingRange,\n        setTitle,\n        addRating,\n        getRating,\n        addFavorite,\n        removeFavorite,\n        toggleFavorite,\n        fetchMovies,\n        getMovie,\n        toggleGenre,\n    }\n\n    return (\n    <UserContext.Provider value={value}>\n        {props.children}\n    </UserContext.Provider>\n    )\n}\n\nexport default UserProvider"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}